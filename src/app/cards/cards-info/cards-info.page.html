<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="text-align-center app_bar_title" style="font-weight: bold;">
      Cards
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-text-center">

  <div class="information">


    <!-- <div *ngIf="isLoading">
      <ion-card>
        <ion-card-header> -->
    <!-- <ion-card-title><b>Card Information</b></ion-card-title> -->
    <!-- <ion-card-title>
            <ion-row class="ion-justify-content-center ion-align-items-center">
              <img src="assets/image/logo-carddd.png" alt="" width="30px" height="45px"
                style="margin-bottom: -10px; margin-right: 10px;">
              <h6 style="font-weight: 400; font-size: 30px; ">CARDAXO</h6>
            </ion-row>
          </ion-card-title>
          <ion-card-subtitle>${{total | number:'1.1-4'}}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <app-skeleton-big-card></app-skeleton-big-card>
        </ion-card-content>
      </ion-card>
    </div> -->

    <div *ngIf="!isLoading && !( cardDetails && cardDetails.encoded_card_detail)">
      <ion-grid>
        <ion-row class="ion-align-items-center ion-justify-content-center" style="height: 30vh;">
          <ion-col size="8">
            <h4>
              The card isn't active yet.
              Please, <a href="#" (click)="retry($event)">retry later.</a>
            </h4>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <div *ngIf="isLoading">
      <ion-card>


        <ion-card-content>
          <div class="front" style="height: 100px !important;">
            <div class="row">
              <p>CARDAXO</p>
              <p>${{total | number:'1.1-4'}}</p>
              <img src="https://raw.githubusercontent.com/a-giuliano/credit-card-css/master/src/assets/mastercard.png"
                alt="logo" />
            </div>
          </div>
          <app-skeleton-big-card></app-skeleton-big-card>
        </ion-card-content>

      </ion-card>
    </div>


    <ion-card *ngIf="!isLoading && cardDetails && cardDetails.encoded_card_detail">
      <ion-card-content>
        <div class="front">
          <div class="row">
            <p>CARDAXO</p>
            <p>${{total | number:'1.1-4'}}</p>
            <img src="https://raw.githubusercontent.com/a-giuliano/credit-card-css/master/src/assets/mastercard.png"
              alt="logo" />
          </div>
          <div class="row">
            <p *ngFor="let numberChunk of splitNumber(cardNumber)" class="card-number">{{ numberChunk }}</p>
          </div>
          <div class="row">
            <p class="cardholder">CVV: {{cvv}}</p>
            <p class="exp-date">Expires: {{expire}}</p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- <ion-card *ngIf="!isLoading && cardDetails && cardDetails.encoded_card_detail">
      <ion-card-header> -->
    <!-- <ion-card-title><b>Card Information</b></ion-card-title> -->
    <!-- <ion-card-title>
          <ion-row class="ion-justify-content-center ion-align-items-center">
            <img src="assets/image/logo-carddd.png" alt="" width="30px" height="45px"
              style="margin-bottom: -10px; margin-right: 10px;">
            <h6 style="font-weight: 400; font-size: 30px; ">CARDAXO</h6>
          </ion-row>
        </ion-card-title>
        <ion-card-subtitle>${{total | number:'1.1-4'}}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-label><b>Card Number:</b></ion-label>
            <ion-card-subtitle>{{ cardNumber }}</ion-card-subtitle>
          </ion-item>
          <ion-item>
            <ion-label><b>CVV:</b></ion-label>
            <ion-card-subtitle>{{ cvv }}</ion-card-subtitle>
          </ion-item>
          <ion-item lines="none">
            <ion-label><b>Expiration Date:</b></ion-label>
            <ion-card-subtitle>{{ expire }}</ion-card-subtitle>
          </ion-item>

        </ion-list>
      </ion-card-content>
    </ion-card> -->
  </div>




  <div class="assets">

    <div class="head_section">
      <h4>
        Transactions
      </h4>
      <p></p>
    </div>

    <div *ngIf="isLoading">
      <ion-card *ngFor="let i of [].constructor(10);">
        <ion-card-content>
          <app-skeleton-card></app-skeleton-card>
        </ion-card-content>
      </ion-card>
    </div>

    <div *ngIf="!isLoading && !( cardDetails && bankTransactions.length > 0)">
      <ion-grid>
        <ion-row class="ion-align-items-center ion-justify-content-center" style="height: 30vh;">
          <ion-col size="8">
            <h4>
              There is no Transaction.
            </h4>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>


    <div *ngIf="!isLoading && cardDetails && bankTransactions.length > 0">
      <ion-card *ngFor="let bankTransaction of bankTransactions; let i = index" (click)="toggleDetails(i)">
        <ion-card-content>
          <ion-item [lines]="showDetails === i ? 'full' : 'none'">
            <ion-label>Transaction ID</ion-label>
            <ion-label slot="end">{{ bankTransaction.tx_id }}<ion-icon
                [name]="showDetails === i ? 'caret-up-outline': 'caret-down-outline'"
                style="padding-left: 10px;"></ion-icon></ion-label>
          </ion-item>
          <ion-list lines="none" *ngIf="showDetails === i">
            <ion-item>
              <ion-label>Credit</ion-label>
              <ion-label slot="end">{{ bankTransaction.credit | number:'1.1-4'}} {{
                bankTransaction.tx_currency}}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>Amount</ion-label>
              <ion-label slot="end">{{ bankTransaction.tx_amount | number:'1.1-4'}} {{ bankTransaction.tx_currency
                }}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>fee</ion-label>
              <ion-label slot="end">{{ bankTransaction.fee | number:'1.1-4'}} {{ bankTransaction.tx_currency
                }}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>Transaction Type</ion-label>
              <ion-label slot="end">{{ bankTransaction.type === 2 ? 'Recharge' : 'Debit' }}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>Transaction State</ion-label>
              <ion-label slot="end">{{ bankTransaction.status === 0 ? 'In operation' : bankTransaction.status === 1 ?
                'Success' : 'Fail' }}</ion-label>
            </ion-item>

            <ion-item>
              <ion-label>Transaction Date</ion-label>
              <ion-label slot="end">{{ (+bankTransaction.transaction_date!) * 1000 | date: 'medium' }}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>MC Trade no.</ion-label>
              <ion-label slot="end">{{ bankTransaction.mc_trade_no }}</ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </div>



  </div>



</ion-content>